# Field Reference Enum (Unity Package)
A package that aims to reduce reflection by automatically generating code to access class fields through enums and references, this also has the side effect of making it possible to select individual fields as a variable in the Unity Inspector without custom editors.

This relies on the [rozlyn source generators](https://docs.unity3d.com/6000.1/Documentation/Manual/roslyn-analyzers.html).

## Usage Examples 
```csharp
using Leon.FieldRef;
// Usage Example
[FieldEnum(typeof(float))]
public class Player
{
    public float MaxHealth;
    public float Speed;
}
```
The above code would generate this

```csharp
// <auto-generated/>
namespace Leon.FieldRef
{
    public static partial class PlayerExtensions
    {
        public enum FieldRef_float
        {
            MaxHealth = 0,
            Speed = 1,
        }
        
        public static ref float GetFieldRef(this Player self, FieldRef_float target)
        {
            switch (target)
            {
                case FieldRef_float.MaxHealth: return ref self.MaxHealth;
                case FieldRef_float.Speed: return ref self.Speed;
                default: throw new System.ArgumentOutOfRangeException(nameof(target));
            }
        }
    }
}
```
This is useful when creating modifier systems in unity, this allows a way to select field targets without reflection or custom inspector editors in Unity.
```csharp
// Usage Example
[System.Serializable]
public class PlayerModifier
{
    public PlayerExtensions.FieldRef_float TargetValue;
    public Operation ModifierOperation;
    public float ModifierValue;

    public enum Operation
    {
        Add,
        Multiply,
    }

    public void ApplyModifier(Player player)
    {
        ref var field = ref player.GetFieldRef(TargetValue);
        switch (ModifierOperation)
        {
            case Operation.Add:
                field += ModifierValue;
                break;
            case Operation.Multiply:
                field *= ModifierValue;
                break;
        }
    }
}
```
### Partial Classes
If the class is partial, it will put the enum and methods directly into the partial class instead of extension methods.

```csharp
using Leon.FieldRef;
// Usage Example (Partial)
[FieldEnum(typeof(float))]
public partial class Player
{
    public float MaxHealth;
    public float Speed;
}
```
Above code would generate this
```csharp
// <auto-generated/>
public partial class Player
{
    public enum FieldRef_float
    {
        MaxHealth = 0,
        Speed = 1,
    }
    
    public ref float GetFieldRef(FieldRef_float target)
    {
        switch (target)
        {
            case FieldRef_float.MaxHealth: return ref this.MaxHealth;
            case FieldRef_float.Speed: return ref this.Speed;
            default: throw new System.ArgumentOutOfRangeException(nameof(target));
        }
    }
}
```